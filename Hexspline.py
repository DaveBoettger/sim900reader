import numpy as np

tempdata=[310,300,290,280,270,260,250,240,230,220,210,200,190,180,170,160,150,140,130,120,110,100,95,90,85,80,77,75,70,65,60,58,56,54,52,50,48,46,44,42,40,38,36,34,32,30,28,26,24,22,21,20,19,18,17,16,15,14,13,12,11,10,9.5,9,8.5,8,7.5,7.25,7,6.75,6.5,6.25,6,5.75,5.5,5.25,5,4.9,4.8,4.7,4.6,4.5,4.4,4.3,4.2,4.1,4,3.9,3.8,3.7,3.6,3.5,3.4,3.3,3.2,3.1,3,2.9,2.8,2.7,2.6,2.5,2.4,2.3,2.2,2.1,2,1.95,1.9,1.85,1.8,1.75,1.7,1.65,1.6,1.55,1.5,1.45,1.4,1.35,1.3,1.25,1.2,1.15,1.1,1.08,1.05,1]

voltdata=[0.52895,0.55206,0.5745,0.59627,0.61801,0.63964,0.66105,0.68205,0.70324,0.72484,0.74613,0.76731,0.78826,0.80898,0.82948,0.84971,0.86974,0.8893,0.90843,0.92718,0.94557,0.96347,0.97227,0.98098,0.98968,0.99823,1.00333,1.00674,1.01538,1.02386,1.03217,1.03541,1.03862,1.0417,1.0448,1.04783,1.05078,1.05369,1.05658,1.05968,1.0618,1.06477,1.06764,1.07065,1.07382,1.07637,1.08055,1.08947,1.10207,1.12248,1.1382,1.15504,1.17316,1.19247,1.21335,1.23428,1.25664,1.27979,1.30363,1.32993,1.36108,1.39548,1.41575,1.4387,1.46323,1.4889,1.51625,1.53033,1.54432,1.55829,1.57223,1.586,1.5997,1.61351,1.62774,1.64164,1.65571,1.66133,1.66698,1.6725,1.67795,1.6832,1.68826,1.69314,1.69782,1.70251,1.70691,1.71093,1.71481,1.7182,1.72136,1.72423,1.72694,1.72954,1.73221,1.73477,1.73742,1.74011,1.74275,1.74534,1.74792,1.75053,1.75308,1.75531,1.75749,1.75961,1.7617,1.76275,1.76372,1.76474,1.76577,1.76681,1.76792,1.76899,1.77006,1.77111,1.77216,1.77322,1.77423,1.77522,1.77621,1.7772,1.77816,1.77907,1.77991,1.78025,1.78072,1.78141]

splinecoefficient=[-0.002311,-0.002244,-0.002177,-0.002174,-0.002163,-0.002141,-0.0021,-0.002119,-0.00216,-0.002129,-0.002118,-0.002095,-0.002072,-0.00205,-0.002023,-0.002003,-0.001956,-0.001913,-0.001875,-0.001839,-0.00179,-0.00176,-0.001742,-0.00174,-0.00171,-0.0017,-0.001705,-0.001728,-0.001696,-0.001662,-0.00162,-0.001605,-0.00154,-0.00155,-0.001515,-0.001475,-0.001455,-0.001445,-0.00155,-0.00106,-0.001485,-0.001435,-0.001505,-0.001585,-0.001275,-0.00209,-0.00446,-0.0063,-0.010205,-0.01572,-0.01684,-0.01812,-0.01931,-0.02088,-0.02093,-0.02236,-0.02315,-0.02384,-0.0263,-0.03115,-0.0344,-0.04054,-0.0459,-0.04906,-0.05134,-0.0547,-0.05632,-0.05596,-0.05588,-0.05576,-0.05508,-0.0548,-0.05524,-0.05692,-0.0556,-0.05628,-0.0562,-0.0565,-0.0552,-0.0545,-0.0525,-0.0506,-0.0488,-0.0468,-0.0469,-0.044,-0.0402,-0.0388,-0.0339,-0.0316,-0.0287,-0.0271,-0.026,-0.0267,-0.0256,-0.0265,-0.0269,-0.0264,-0.0259,-0.0258,-0.0261,-0.0255,-0.0223,-0.0218,-0.0212,-0.0209,-0.021,-0.0194,-0.0204,-0.0206,-0.0208,-0.0222,-0.0214,-0.0214,-0.021,-0.021,-0.0212,-0.0202,-0.0198,-0.0198,-0.0198,-0.0192,-0.0182,-0.0168,-0.017,-0.015666667,-0.0138]

v=len(voltdata)

def splinepoint(x):
        t = 0
        if x>0:
                if x<voltdata[0]:
                        t=(float(x-voltdata[0]))/float(splinecoefficient[0])+float(tempdata[0])
                elif x>voltdata[-1]:
                        t=(float(x-voltdata[-1]))/float(splinecoefficient[-1])+float(tempdata[-1])
                else:
                        for j in range(0,v-1):
                                if voltdata[j]<=x<voltdata[j+1]:
                                        t=(float(x-voltdata[j]))/float((splinecoefficient[j]))+float(tempdata[j])

        elif x<0:
                y=-x
                if y<voltdata[0]:
                        t=(float(y-voltdata[0]))/float(splinecoefficient[0])+float(tempdata[0])
                elif y>voltdata[-1]:
                        t=(float(y-voltdata[-1]))/float(splinecoefficient[-1])+float(tempdata[-1])
                else:
                        for j in range(0,v-1):
                                if voltdata[j]<=y<voltdata[j+1]:
                                        t=(float(y-voltdata[j]))/float(splinecoefficient[j])+float(tempdata[j])

	return t

def linearspline(ninja):
	splinetemp=[]
	for i in range(0,len(ninja)):
		"""
		if ninja[i]<voltdata[0]:
			t=0
		elif ninja[i]>voltdata[127]:
			t=0
		else:
		"""
		t=splinepoint(ninja[i])
#		print t
		splinetemp=np.append(splinetemp,t)
	return splinetemp


